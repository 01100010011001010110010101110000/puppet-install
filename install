echo "======================================================================================"
echo ""
echo "Puppet Server Install"
echo ""
echo "This script will PuppetServer on a CentOS server."
echo ""
echo "======================================================================================"
echo ""
echo "=> Getting version number ..."
OS_MAJ_VERSION=$(rpm -qa \*-release | grep -Ei "oracle|redhat|centos" | cut -d"-" -f3)
echo "=> Done!"
echo "=> Adding Puppetlabs Yum repo ..."
yum install -y http://yum.puppetlabs.com/puppetlabs-release-el-"$OS_MAJ_VERSION".noarch.rpm > /dev/null 2>&1
echo "=> Done!"
echo "=> Installing Puppet Server ..."
yum install puppetserver  > /dev/null 2>&1
echo "=> Done!"
echo "=> Setting some lower memory limits ..."
sed -i 's/-Xms2g -Xmx2g -XX:MaxPermSize=256m/-Xms512m -Xmx512m -XX:MaxPermSize=256m/g' /etc/sysconfig/puppetserver
echo "=> Done!"
echo "=> Setting Puppet Server to start on boot ..."
chkconfig puppetserver on  > /dev/null 2>&1
echo "=> Done!"
echo "=> Starting Puppet Server ..."
service puppetserver start  > /dev/null 2>&1
echo "=> Done!"